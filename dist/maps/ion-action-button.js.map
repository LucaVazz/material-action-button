{"version":3,"sources":["ion-action-button.js"],"names":["actionButtonFactory","$rootScope","$compile","$ionicBody","$animate","$ionicTabsDelegate","actionButton","options","scope","$new","visible","removeOnStateChange","bottom","hasTab","menuBottom","menuOpened","mainButtonElement","secondaryButtonsContainer","element","append","removeButton","removed","addClass","then","$destroy","remove","buttonClicked","data","type","openMenu","mainAction","onClick","ngEvent","removeClass","buttons","index","show","angular","getElementsByClassName","startHidden","showButton","hideButton","$on","hide","create","module","factory","component","templateUrl","bindings","dispatcher","onCreate","controller","$timeout","_this","this","closeMenu","$postLink","length","run","$templateCache","put"],"mappings":"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","file":"../ion-action-button.js","sourcesContent":["'use strict';\r\n\r\n/**\r\n * Private method doing the factory\r\n */\r\nfunction actionButtonFactory($rootScope, $compile, $ionicBody, $animate, $ionicTabsDelegate) {\r\n\r\n    return {\r\n        create: actionButton\r\n    };\r\n\r\n    function actionButton(options) {\r\n        var scope = $rootScope.$new(true);\r\n        var visible = true;\r\n\r\n        scope.options = options;\r\n        scope.options.removeOnStateChange = true;\r\n        scope.options.bottom = scope.options.hasTab ? '55px' : '15px';\r\n        scope.options.menuBottom = scope.options.hasTab ? '115px' : '90px';\r\n        scope.menuOpened = false;\r\n\r\n        // Compile the template\r\n        var element = scope.element = $compile(\r\n            '<material-action-button on-create=\"show()\" options=\"options\" dispatcher=\"buttonClicked(data)\"></material-action-button>'\r\n        )(scope);\r\n\r\n        var mainButtonElement;\r\n        var secondaryButtonsContainer;\r\n\r\n        //append to the body\r\n        $ionicBody.append(element);\r\n\r\n        /**\r\n         * Button remove\r\n         */\r\n        scope.removeButton = function() {\r\n                if (scope.removed) {\r\n                    return;\r\n                }\r\n\r\n                scope.removed = true;\r\n                return $animate\r\n                    .addClass(mainButtonElement, 'action-button-hide')\r\n                    .then(function() {\r\n                        visible = false;\r\n                        scope.$destroy();\r\n                        element.remove();\r\n                        return;\r\n                    })\r\n            }\r\n            /**\r\n             * Button clicked\r\n             */\r\n        scope.buttonClicked = function(data) {\r\n                //we handle main button clicks\r\n                if (data.type === 'main') {\r\n                    //if we have secondary actions...\r\n                    if (data.openMenu) {\r\n                        //if menu is opened, we close it\r\n                        if (scope.menuOpened) {\r\n                            element.removeClass('action-button-menu-show');\r\n                            element.addClass('action-button-menu-hide');\r\n                            $animate.addClass(secondaryButtonsContainer, 'action-button-small-hide')\r\n                                .then(function() {\r\n                                    secondaryButtonsContainer.removeClass('action-button-small-show');\r\n                                    secondaryButtonsContainer.removeClass('action-button-small-hide');\r\n                                    secondaryButtonsContainer.addClass('action-button-small-container__hidden');\r\n                                    scope.menuOpened = false;\r\n                                })\r\n                        } else {\r\n                            //if menu is closed, we open it\r\n                            element.removeClass('action-button-menu-hide');\r\n                            element.addClass('action-button-menu-show');\r\n\r\n\r\n                            secondaryButtonsContainer.removeClass('action-button-small-container__hidden');\r\n                            $animate.addClass(secondaryButtonsContainer, 'action-button-small-show')\r\n                                .then(function() {\r\n                                    scope.menuOpened = true;\r\n                                })\r\n\r\n                        }\r\n                    } else {\r\n                        //if we don't have secondary actions\r\n                        if (scope.options.mainAction.onClick) {\r\n                            return scope.options.mainAction.onClick(data.ngEvent);\r\n                        }\r\n                        return;\r\n                    }\r\n                }\r\n\r\n                if (data.type === 'secondary') {\r\n                    if (scope.options.buttons[data.index].onClick) {\r\n                        return scope.options.buttons[data.index].onClick(data.ngEvent);\r\n                    }\r\n                    return;\r\n                }\r\n            }\r\n            /**\r\n             * Show the menu\r\n             */\r\n        scope.show = function() {\r\n\r\n            $animate.addClass(element, 'button-active') //hack to wait till the element is appended? dont know...\r\n                .then(function() {\r\n                    visible = true;\r\n                    mainButtonElement = angular.element(element[0].getElementsByClassName('action-button'));\r\n                    secondaryButtonsContainer = angular.element(element[0].getElementsByClassName(\r\n                        'action-button-small-container'));\r\n\r\n                    if (scope.options.startHidden) {\r\n                        return;\r\n                    }\r\n                    return $animate.addClass(mainButtonElement, 'action-button-show');\r\n                });\r\n        }\r\n\r\n        scope.showButton = function() {\r\n            return $animate.addClass(mainButtonElement, 'action-button-show')\r\n                .then(function() {\r\n                    visible = true;\r\n                    return;\r\n                })\r\n        }\r\n\r\n        scope.hideButton = function() {\r\n            return $animate\r\n                .addClass(mainButtonElement, 'action-button-hide')\r\n                .then(function() {\r\n                    mainButtonElement.removeClass('action-button-show');\r\n                    mainButtonElement.removeClass('action-button-hide');\r\n                    element.removeClass('action-button-menu-hide');\r\n                    visible = false;\r\n                    return;\r\n                });\r\n        }\r\n\r\n        //auto remove when state changes\r\n        $rootScope.$on('$stateChangeSuccess', function() {\r\n            if (scope.options.removeOnStateChange) {\r\n                scope.removeButton();\r\n                return;\r\n            }\r\n        });\r\n\r\n\r\n        return {\r\n            show: function() {\r\n                return scope.showButton();\r\n            },\r\n            hide: function() {\r\n                return scope.hideButton();\r\n            },\r\n            visible: function() {\r\n                return visible;\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n/**\r\n * Action Button module is initialized here\r\n */\r\nvar module = angular.module('$actionButton', ['ngAnimate']);\r\n\r\nmodule.factory('$actionButton', ['$rootScope',\r\n    '$compile', '$ionicBody', '$animate', '$ionicTabsDelegate', actionButtonFactory\r\n]);\r\n\r\nmodule.component('materialActionButton', {\r\n    templateUrl: 'template.html',\r\n    bindings: {\r\n        options: '<',\r\n        dispatcher: '&',\r\n        onCreate: '&'\r\n    },\r\n    controller: ['$timeout', function($timeout) {\r\n        var _this = this;\r\n        // this.opened = false;\r\n\r\n        this.closeMenu = function(data) {\r\n            //we simulate a main button touch order to close\r\n            data.openMenu = true;\r\n            _this.dispatcher({\r\n                data: data\r\n            });\r\n            return;\r\n        }\r\n\r\n        this.$postLink = function() {\r\n            $timeout(function() {\r\n                _this.onCreate();\r\n            })\r\n        }\r\n\r\n        this.buttonClicked = function(data) {\r\n\r\n            //if the element has no buttons configured...\r\n            if (!_this.options.buttons || !_this.options.buttons.length) {\r\n                _this.dispatcher({\r\n                    data: data\r\n                });\r\n                return;\r\n            }\r\n\r\n            //if the element has buttons configured...\r\n            //we pass the openMenu true prop...\r\n            if (data.type === 'main') {\r\n                data.openMenu = true;\r\n                _this.dispatcher({\r\n                    data: data\r\n                });\r\n                return;\r\n            }\r\n\r\n            //any other click here has to be from a small button\r\n            _this.dispatcher({\r\n                data: data\r\n            });\r\n\r\n        };\r\n    }]\r\n});\nangular.module(\"$actionButton\").run([\"$templateCache\", function($templateCache) {$templateCache.put(\"template.html\",\"\\r\\n<div ng-animate-children=\\\"true\\\">\\r\\n\t<div class=\\\"action-button-small-container\\\" ng-click=\\\"$ctrl.closeMenu({type: \\'main\\', backgroundClick: true})\\\" ng-style=\\\"{\\'padding-bottom\\':$ctrl.options.menuBottom}\\\">\\r\\n\t\t<div class=\\\"action-button-small-container--individual\\\" ng-repeat=\\\"button in $ctrl.options.buttons\\\" ng-click=\\\"$ctrl.buttonClicked({ngEvent:$event, type: \\'secondary\\', index: $index})\\\">\\r\\n\t\t\t<span class=\\\"action-button-small--label\\\" ng-if=\\\"button.label\\\">{{button.label}}</span>\\r\\n\t\t\t<button class=\\\"action-button-small\\\" ng-class=\\\"{\\'destructive\\': button.destructive}\\\">\\r\\n\t\t\t\t<i class=\\\"action-button-small--icon icon\\\" ng-class=\\\"button.icon\\\"><span class=\\\"action-button-small--icon__label\\\" ng-if=\\\"!button.icon\\\">{{button.letter || button.label[0]}}</span></i>\\r\\n\t\t\t</button>\\r\\n\t\t</div>\\r\\n\t</div>\\r\\n\t<button class=\\\"action-button\\\" ng-click=\\\"$ctrl.buttonClicked({ngEvent:$event, type: \\'main\\'})\\\" ng-style=\\\"{bottom:$ctrl.options.bottom}\\\">\\r\\n\t\t<i class=\\'action-button--icon icon action-button--icon__main\\' ng-class=\\\"$ctrl.options.mainAction.icon\\\"></i>\\r\\n\t\t<i class=\\'action-button--icon action-button-icon__close\\' ng-class=\\\"$ctrl.options.mainAction.closeIcon\\\"></i>\\r\\n\t</button>\\r\\n</div>\\r\\n\");}]);"]}