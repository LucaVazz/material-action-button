{"version":3,"sources":["ion-action-button.js"],"names":["actionButtonFactory","$rootScope","$compile","$ionicBody","$animate","actionButton","options","scope","$new","visible","removeOnStateChange","menuOpened","mainButtonElement","secondaryButtonsContainer","element","append","removeButton","removed","addClass","then","$destroy","remove","buttonClicked","data","type","openMenu","mainAction","onClick","removeClass","buttons","index","show","angular","getElementsByClassName","startHidden","showButton","hideButton","$on","hide","create","module","factory","component","templateUrl","bindings","dispatcher","onCreate","controller","$timeout","_this","this","closeMenu","$postLink","length","run","$templateCache","put"],"mappings":"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","file":"../ion-action-button.js","sourcesContent":["'use strict';\r\n\r\n/**\r\n * Private method doing the factory\r\n */\r\nfunction actionButtonFactory($rootScope, $compile, $ionicBody, $animate) {\r\n\r\n    return {\r\n        create: actionButton\r\n    };\r\n\r\n    function actionButton(options) {\r\n        var scope = $rootScope.$new(true);\r\n        var visible = true;\r\n\r\n        scope.options = options;\r\n        scope.options.removeOnStateChange = true;\r\n        scope.menuOpened = false;\r\n\r\n        // Compile the template\r\n        var element = scope.element = $compile(\r\n            '<material-action-button on-create=\"show()\" options=\"options\" dispatcher=\"buttonClicked(data)\"></material-action-button>'\r\n        )(scope);\r\n\r\n        var mainButtonElement;\r\n        var secondaryButtonsContainer;\r\n\r\n        //append to the body\r\n        $ionicBody.append(element);\r\n\r\n        /**\r\n         * Button remove\r\n         */\r\n        scope.removeButton = function() {\r\n                if (scope.removed) {\r\n                    return;\r\n                }\r\n\r\n                scope.removed = true;\r\n                return $animate\r\n                    .addClass(mainButtonElement, 'action-button-hide')\r\n                    .then(function() {\r\n                        visible = false;\r\n                        scope.$destroy();\r\n                        element.remove();\r\n                        return;\r\n                    })\r\n            }\r\n            /**\r\n             * Button clicked\r\n             */\r\n        scope.buttonClicked = function(data) {\r\n                //we handle main button clicks\r\n                if (data.type === 'main') {\r\n                    //if we have secondary actions...\r\n                    if (data.openMenu) {\r\n                        //if menu is opened, we close it\r\n                        if (scope.menuOpened) {\r\n                            element.removeClass('action-button-menu-show');\r\n                            element.addClass('action-button-menu-hide');\r\n                            $animate.addClass(secondaryButtonsContainer, 'action-button-small-hide')\r\n                                .then(function() {\r\n                                    secondaryButtonsContainer.removeClass('action-button-small-show');\r\n                                    secondaryButtonsContainer.removeClass('action-button-small-hide');\r\n                                    secondaryButtonsContainer.addClass('action-button-small-container__hidden');\r\n                                    scope.menuOpened = false;\r\n                                })\r\n                        } else {\r\n                            //if menu is closed, we open it\r\n                            element.removeClass('action-button-menu-hide');\r\n                            element.addClass('action-button-menu-show');\r\n\r\n\r\n                            secondaryButtonsContainer.removeClass('action-button-small-container__hidden');\r\n                            $animate.addClass(secondaryButtonsContainer, 'action-button-small-show')\r\n                                .then(function() {\r\n                                    scope.menuOpened = true;\r\n                                })\r\n\r\n                        }\r\n                    } else {\r\n                        //if we don't have secondary actions\r\n                        if (scope.options.mainAction.onClick) {\r\n                            return scope.options.mainAction.onClick();\r\n                        }\r\n                        return;\r\n                    }\r\n                }\r\n\r\n                if (data.type === 'secondary') {\r\n                    if (scope.options.buttons[data.index].onClick) {\r\n                        return scope.options.buttons[data.index].onClick();\r\n                    }\r\n                    return;\r\n                }\r\n            }\r\n            /**\r\n             * Show the menu\r\n             */\r\n        scope.show = function() {\r\n\r\n            $animate.addClass(element, 'button-active') //hack to wait till the element is appended? dont know...\r\n                .then(function() {\r\n                    visible = true;\r\n                    mainButtonElement = angular.element(element[0].getElementsByClassName('action-button'));\r\n                    secondaryButtonsContainer = angular.element(element[0].getElementsByClassName(\r\n                        'action-button-small-container'));\r\n\r\n                    if (scope.options.startHidden) {\r\n                        return;\r\n                    }\r\n                    return $animate.addClass(mainButtonElement, 'action-button-show');\r\n                });\r\n        }\r\n\r\n        scope.showButton = function() {\r\n            return $animate.addClass(mainButtonElement, 'action-button-show')\r\n                .then(function() {\r\n                    visible = true;\r\n                    return;\r\n                })\r\n        }\r\n\r\n        scope.hideButton = function() {\r\n            return $animate\r\n                .addClass(mainButtonElement, 'action-button-hide')\r\n                .then(function() {\r\n                    mainButtonElement.removeClass('action-button-show');\r\n                    mainButtonElement.removeClass('action-button-hide');\r\n                    element.removeClass('action-button-menu-hide');\r\n                    visible = false;\r\n                    return;\r\n                });\r\n        }\r\n\r\n        //auto remove when state changes\r\n        $rootScope.$on('$stateChangeSuccess', function() {\r\n            if (scope.options.removeOnStateChange) {\r\n                scope.removeButton();\r\n                return;\r\n            }\r\n        });\r\n\r\n\r\n        return {\r\n            show: function() {\r\n                return scope.showButton();\r\n            },\r\n            hide: function() {\r\n                return scope.hideButton();\r\n            },\r\n            visible: function() {\r\n                return visible;\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n/**\r\n * Action Button module is initialized here\r\n */\r\nvar module = angular.module('$actionButton', ['ngAnimate']);\r\n\r\nmodule.factory('$actionButton', ['$rootScope',\r\n    '$compile', '$ionicBody', '$animate', actionButtonFactory\r\n]);\r\n\r\nmodule.component('materialActionButton', {\r\n    templateUrl: 'template.html',\r\n    bindings: {\r\n        options: '<',\r\n        dispatcher: '&',\r\n        onCreate: '&'\r\n    },\r\n    controller: ['$timeout', function($timeout) {\r\n        var _this = this;\r\n        // this.opened = false;\r\n\r\n        this.closeMenu = function(data) {\r\n            //we simulate a main button touch order to close\r\n            data.openMenu = true;\r\n            _this.dispatcher({\r\n                data: data\r\n            });\r\n            return;\r\n        }\r\n\r\n        this.$postLink = function() {\r\n            $timeout(function() {\r\n                _this.onCreate();\r\n            })\r\n        }\r\n\r\n        this.buttonClicked = function(data) {\r\n\r\n            //if the element has no buttons configured...\r\n            if (!_this.options.buttons || !_this.options.buttons.length) {\r\n                _this.dispatcher({\r\n                    data: data\r\n                });\r\n                return;\r\n            }\r\n\r\n            //if the element has buttons configured...\r\n            //we pass the openMenu true prop...\r\n            if (data.type === 'main') {\r\n                data.openMenu = true;\r\n                _this.dispatcher({\r\n                    data: data\r\n                });\r\n                return;\r\n            }\r\n\r\n            //any other click here has to be from a small button\r\n            _this.dispatcher({\r\n                data: data\r\n            });\r\n\r\n        };\r\n    }]\r\n});\nangular.module(\"$actionButton\").run([\"$templateCache\", function($templateCache) {$templateCache.put(\"template.html\",\"\\r\\n<div ng-animate-children=\\\"true\\\">\\r\\n\t<div class=\\\"action-button-small-container\\\" ng-click=\\\"$ctrl.closeMenu({type: \\'main\\', backgroundClick: true})\\\">\\r\\n\t\t<div class=\\\"action-button-small-container--individual\\\" ng-repeat=\\\"button in $ctrl.options.buttons\\\" ng-click=\\\"$ctrl.buttonClicked({type: \\'secondary\\', index: $index})\\\">\\r\\n\t\t\t<span class=\\\"action-button-small--label\\\" ng-if=\\\"button.label\\\">{{button.label}}</span>\\r\\n\t\t\t<button class=\\\"action-button-small\\\" ng-style=\\\"{\\'backgroundColor\\': button.backgroundColor, \\'color\\': button.iconColor}\\\">\\r\\n\t\t\t\t<i class=\\\"action-button-small--icon icon\\\" ng-class=\\\"button.icon\\\"><span class=\\\"action-button-small--icon__label\\\" ng-if=\\\"!button.icon\\\">{{button.letter || button.label[0]}}</span></i>\\r\\n\t\t\t</button>\\r\\n\t\t</div>\\r\\n\t</div>\\r\\n\t<button class=\\\"action-button\\\" ng-click=\\\"$ctrl.buttonClicked({type: \\'main\\'})\\\" ng-style=\\\"{\\'backgroundColor\\': $ctrl.options.mainAction.backgroundColor}\\\">\\r\\n\t\t<i class=\\'action-button--icon icon action-button--icon__main\\' ng-class=\\\"$ctrl.options.mainAction.icon\\\" ng-style=\\\"{\\'color\\': $ctrl.options.mainAction.textColor}\\\"></i>\\r\\n\t\t<i class=\\'action-button--icon action-button-icon__close ion-android-close\\' ng-style=\\\"{\\'color\\': $ctrl.options.mainAction.textColor}\\\"></i>\\r\\n\t</button>\\r\\n</div>\\r\\n\");}]);"]}