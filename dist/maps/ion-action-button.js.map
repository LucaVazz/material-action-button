{"version":3,"sources":["ion-action-button.js"],"names":["actionButtonFactory","$rootScope","$compile","$ionicBody","$animate","$ionicTabsDelegate","actionButton","options","scope","$new","visible","removeOnStateChange","bottom","hasTab","menuBottom","menuOpened","mainButtonElement","secondaryButtonsContainer","element","append","removeButton","removed","addClass","then","$destroy","remove","buttonClicked","data","type","openMenu","mainAction","onClick","ngEvent","removeClass","buttons","index","show","angular","getElementsByClassName","startHidden","showButton","hideButton","$on","hide","create","module","factory","component","templateUrl","bindings","dispatcher","onCreate","controller","$timeout","_this","this","closeMenu","$postLink","length","run","$templateCache","put"],"mappings":"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","file":"../ion-action-button.js","sourcesContent":["'use strict';\n\n/**\n * Private method doing the factory\n */\nfunction actionButtonFactory($rootScope, $compile, $ionicBody, $animate, $ionicTabsDelegate) {\n\n    return {\n        create: actionButton\n    };\n\n    function actionButton(options) {\n        var scope = $rootScope.$new(true);\n        var visible = true;\n\n        scope.options = options;\n        scope.options.removeOnStateChange = true;\n        scope.options.bottom = scope.options.hasTab ? '55px' : '15px';\n        scope.options.menuBottom = scope.options.hasTab ? '115px' : '90px';\n        scope.menuOpened = false;\n\n        // Compile the template\n        var element = scope.element = $compile(\n            '<material-action-button on-create=\"show()\" options=\"options\" dispatcher=\"buttonClicked(data)\"></material-action-button>'\n        )(scope);\n\n        var mainButtonElement;\n        var secondaryButtonsContainer;\n\n        //append to the body\n        $ionicBody.append(element);\n\n        /**\n         * Button remove\n         */\n        scope.removeButton = function() {\n                if (scope.removed) {\n                    return;\n                }\n\n                scope.removed = true;\n                return $animate\n                    .addClass(mainButtonElement, 'action-button-hide')\n                    .then(function() {\n                        visible = false;\n                        scope.$destroy();\n                        element.remove();\n                        return;\n                    })\n            }\n            /**\n             * Button clicked\n             */\n        scope.buttonClicked = function(data) {\n                //we handle main button clicks\n                if (data.type === 'main') {\n                    //if we have secondary actions...\n                    if (data.openMenu) {\n                        //if menu is opened, we close it\n                        if (scope.menuOpened) {\n                            element.removeClass('action-button-menu-show');\n                            element.addClass('action-button-menu-hide');\n                            $animate.addClass(secondaryButtonsContainer, 'action-button-small-hide')\n                                .then(function() {\n                                    secondaryButtonsContainer.removeClass('action-button-small-show');\n                                    secondaryButtonsContainer.removeClass('action-button-small-hide');\n                                    secondaryButtonsContainer.addClass('action-button-small-container__hidden');\n                                    scope.menuOpened = false;\n                                })\n                        } else {\n                            //if menu is closed, we open it\n                            element.removeClass('action-button-menu-hide');\n                            element.addClass('action-button-menu-show');\n\n\n                            secondaryButtonsContainer.removeClass('action-button-small-container__hidden');\n                            $animate.addClass(secondaryButtonsContainer, 'action-button-small-show')\n                                .then(function() {\n                                    scope.menuOpened = true;\n                                })\n\n                        }\n                    } else {\n                        //if we don't have secondary actions\n                        if (scope.options.mainAction.onClick) {\n                            return scope.options.mainAction.onClick(data.ngEvent);\n                        }\n                        return;\n                    }\n                }\n\n                if (data.type === 'secondary') {\n                    if (scope.options.buttons[data.index].onClick) {\n                        return scope.options.buttons[data.index].onClick(data.ngEvent, data.index);\n                    }\n                    return;\n                }\n            }\n            /**\n             * Show the menu\n             */\n        scope.show = function() {\n\n            $animate.addClass(element, 'button-active') //hack to wait till the element is appended? dont know...\n                .then(function() {\n                    visible = true;\n                    mainButtonElement = angular.element(element[0].getElementsByClassName('action-button'));\n                    secondaryButtonsContainer = angular.element(element[0].getElementsByClassName(\n                        'action-button-small-container'));\n\n                    if (scope.options.startHidden) {\n                        return;\n                    }\n                    return $animate.addClass(mainButtonElement, 'action-button-show');\n                });\n        }\n\n        scope.showButton = function() {\n            return $animate.addClass(mainButtonElement, 'action-button-show')\n                .then(function() {\n                    visible = true;\n                    return;\n                })\n        }\n\n        scope.hideButton = function() {\n            return $animate\n                .addClass(mainButtonElement, 'action-button-hide')\n                .then(function() {\n                    mainButtonElement.removeClass('action-button-show');\n                    mainButtonElement.removeClass('action-button-hide');\n                    element.removeClass('action-button-menu-hide');\n                    visible = false;\n                    return;\n                });\n        }\n\n        //auto remove when state changes\n        $rootScope.$on('$stateChangeSuccess', function() {\n            if (scope.options.removeOnStateChange) {\n                scope.removeButton();\n                return;\n            }\n        });\n\n\n        return {\n            show: function() {\n                return scope.showButton();\n            },\n            hide: function() {\n                return scope.hideButton();\n            },\n            visible: function() {\n                return visible;\n            }\n        }\n    }\n}\n\n/**\n * Action Button module is initialized here\n */\nvar module = angular.module('$actionButton', ['ngAnimate']);\n\nmodule.factory('$actionButton', ['$rootScope',\n    '$compile', '$ionicBody', '$animate', '$ionicTabsDelegate', actionButtonFactory\n]);\n\nmodule.component('materialActionButton', {\n    templateUrl: 'template.html',\n    bindings: {\n        options: '<',\n        dispatcher: '&',\n        onCreate: '&'\n    },\n    controller: ['$timeout', function($timeout) {\n        var _this = this;\n        // this.opened = false;\n\n        this.closeMenu = function(data) {\n            //we simulate a main button touch order to close\n            data.openMenu = true;\n            _this.dispatcher({\n                data: data\n            });\n            return;\n        }\n\n        this.$postLink = function() {\n            $timeout(function() {\n                _this.onCreate();\n            })\n        }\n\n        this.buttonClicked = function(data) {\n\n            //if the element has no buttons configured...\n            if (!_this.options.buttons || !_this.options.buttons.length) {\n                _this.dispatcher({\n                    data: data\n                });\n                return;\n            }\n\n            //if the element has buttons configured...\n            //we pass the openMenu true prop...\n            if (data.type === 'main') {\n                data.openMenu = true;\n                _this.dispatcher({\n                    data: data\n                });\n                return;\n            }\n\n            //any other click here has to be from a small button\n            _this.dispatcher({\n                data: data\n            });\n\n        };\n    }]\n});\nangular.module(\"$actionButton\").run([\"$templateCache\", function($templateCache) {$templateCache.put(\"template.html\",\"\\r\\n<div ng-animate-children=\\\"true\\\">\\r\\n\t<div class=\\\"action-button-small-container\\\" ng-click=\\\"$ctrl.closeMenu({type: \\'main\\', backgroundClick: true})\\\" ng-style=\\\"{\\'padding-bottom\\':$ctrl.options.menuBottom}\\\">\\r\\n\t\t<div class=\\\"action-button-small-container--individual\\\" ng-repeat=\\\"button in $ctrl.options.buttons\\\" ng-click=\\\"$ctrl.buttonClicked({ngEvent:$event, type: \\'secondary\\', index: $index})\\\">\\r\\n\t\t\t<span class=\\\"action-button-small--label\\\" ng-if=\\\"button.label\\\">{{button.label}}</span>\\r\\n\t\t\t<button class=\\\"action-button-small\\\" ng-class=\\\"{\\'destructive\\': button.destructive}\\\">\\r\\n\t\t\t\t<i class=\\\"action-button-small--icon icon\\\" ng-class=\\\"button.icon\\\"><span class=\\\"action-button-small--icon__label\\\" ng-if=\\\"!button.icon\\\">{{button.letter || button.label[0]}}</span></i>\\r\\n\t\t\t</button>\\r\\n\t\t</div>\\r\\n\t</div>\\r\\n\t<button class=\\\"action-button\\\" ng-click=\\\"$ctrl.buttonClicked({ngEvent:$event, type: \\'main\\'})\\\" ng-style=\\\"{bottom:$ctrl.options.bottom}\\\">\\r\\n\t\t<i class=\\'action-button--icon icon action-button--icon__main\\' ng-class=\\\"$ctrl.options.mainAction.icon\\\"></i>\\r\\n\t\t<i class=\\'action-button--icon action-button-icon__close\\' ng-class=\\\"$ctrl.options.mainAction.closeIcon\\\"></i>\\r\\n\t</button>\\r\\n</div>\\r\\n\");}]);"]}